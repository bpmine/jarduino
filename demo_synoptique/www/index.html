<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoring Jarduino</title>
</head>
<body>
    <synoptique-component></synoptique-component>
	
    <script src="cuves.js"></script>
    <script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script>
    <script>
		
        document.addEventListener('DOMContentLoaded', (event) => {

			const socket = io();    
			//var socket = io.connect("http://127.0.0.1:5001/");
            
            socket.on('connect', function(data) {
			console.log("CONNECT");
			})
			
            /*socket.on('server_message', function(data) {
			console.log("RECV");
                console.log('Received message from server:', data.message);
            });	*/		

            socket.on('disconnect', function() {
                console.log('Disconnected from server');
            });

			
			socket.on('server_message', function(data) {
                //const data = document.getElementById('data');
				console.log("Salut");
                console.log(data);
                window.update_cuves(data);
            });

            /*const data = {
                'main': {
                    'level': 2,
                    'pompe': true,
                    'state': 'on',
                    'volt': 123,
                    'db': 65521,
                    'time': '2024-05-31T14:00:00Z'
                },
                'paul': {
                    'level': 1,
                    'pompe': false,
                    'state': 'sleep',
                    'volt': 101,
                    'db': 65511,
                    'time': '2024-05-31T14:00:00Z'
                },
                'reduit': {
                    'level': 0,
                    'pompe': true,
                    'state': 'sleep',
                    'volt': 113,
                    'db': 65510,
                    'time': '2024-05-31T14:00:00Z'
                },
                'barbec': {
                    'level': 3,
                    'pompe': false,
                    'state': 'off',
                    'volt': 110,
                    'db': 65501,
                    'time': '2024-05-31T14:00:00Z'
                }
            };
            window.update_cuves(data);*/
			
        });
    </script>
</body>
</html>
